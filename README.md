주어진 INPUT을 활용하여 사진의 마스크 착용 여부를 판단하는 모델구현

_________________________________________________________________________________________________

제안 배경

	 처음 생각은 코로나 시대가 굉장히 길어지면서 마스크를 다들 쓰고 다니지만

	아직도 어르신 분들이나 몇몇 분들은 정확한 마스크 착용방법을 지키지 않으십니다.

	게다가 정확하지 않은 마스크 착용은 타인에게 불쾌감을 줄 수 있다고 생각하여 

	실내 출입 시 마스크를 착용했는지, 제대로 착용했는지를 파악할 수 있는 마스크 식별 모델을 

	만들어보자 생각하게 되어 시도해보았습니다.


_________________________________________________________________________________________________


개발 환경

	◾ Operating system : Window 10 
	◾ Language : Python
	◾ Development Tools : Colab
	◾ Library : opencv, tensorflow, keras, pillow, os ....
  
  
______________________________________________________________________________________________


설계 내용

(1) Data selection & Preperation ( 데이터 선택 및 준비 )

필요 데이터 : 마스크를 쓰지 않은 인물 사진 , 마스크를 착용한 인물 사진


 - 해당 사진들을 직접 구하기 어렵다고 판단했고 직접 데이터셋을 만들어보자 판단.
 - 마스크를 쓰지 않은 인물 데이터를 Google 과 ‘AI가 만든 저작권 없는 인물사진 ‘에서 찾았다 
![image](https://user-images.githubusercontent.com/66824080/202888695-31b5570b-0cb2-4f8c-aecd-2652f809e37a.png)

-> Ai가 만든 인물사진들은 dataset, 즉 여러장을 한번에 무료로 사용할 수 없었고 상업적 이용이 아닌 경우 한장씩 다운로드가 가능했다. 즉 400장 정도를 직접 한장, 한장 다운받았다.


![image](https://user-images.githubusercontent.com/66824080/202888733-3157bd33-3081-4fee-a93a-43708c4ff8e3.png)
 -> Facial landmark 추출을 위해  shape_predictor_68_face_landmark를 이용해서  얼굴 부위별 좌표를 파악.!


마스크가 착용 되는 얼굴에서 중요 포인트를 4가지
3번 : 왼쪽  턱
8번 : 밑 턱
13번 : 오른쪽 턱
29번 : 코 중앙
이미지에 삽입될 마스크 이미지 크기 조절을 위해 위 4가지 좌표들을 사용

![image](https://user-images.githubusercontent.com/66824080/202888752-1f7a6d75-aeff-4296-ae83-7af466b35267.png)


(그림 2)와 같이 마스크 png 사진을 색깔, 모양별로 여러 장 준비.


(1) Data selection & Preperation ( 마스크 데이터 만들기(2) )

마스크 이미지를그냥 사용하여 이미지에 붙히면 얼굴에 맞게 하기 어렵다고 판단,
 마스크를 반으로 쪼개어 얼굴의 반쪽 별로 길이를 설정하여 얼굴에 맞게 마스크가 부착되도록 설정

마스크의 높이는 8번과 29번 사이의 거리에 특정 비율을 곱해서 높이를 설정, 
왼쪽의 얼굴부분은 8번과 29번을 연결하는 직선과 3번 점 사이의 거리를 이용해 마스크의 넓이를 설정하고 
오른쪽의 얼굴부분도 마찬가지로 직선과 13번 사이의 거리를 이용해 넓이를 설정.
  
반으로 쪼갠 마스크는 다시 합친 후 8번과 29번의 x, y 좌표를 이용하여 ArcTan 값을 도출하여 
인물 얼굴의 기울어짐을 각도로 구하여 합친 마스크를 회전시켜 얼굴에 부착.

![image](https://user-images.githubusercontent.com/66824080/202888777-10b78f5a-fee0-4c62-a281-f547afea0d2f.png)

 -> 결과값 예시. 완벽하진 않지만 얼굴에 기울어진 각도에 맞춰 완성된 걸 볼 수 있다.






